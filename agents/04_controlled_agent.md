[« ツール工夫](./03_langchain2.md)

# 概要

LLM の高い自由度で発生する問題が多くて、実運用は限られたタスクで使うことが基本なので、がっつり制御されたエージェントを作ったら良くなるのかも？

# 手順

1. LLM にタスクを教えて、プランを立ててもらう
2. LLM にプラン、進行状態、ツールのリストを提供して、次に使うツールを選んでもらう
3. LLM にプラン、進行状態、選ばれたツールとその説明を提供して、ツールを使ってもらう
4. 答えが出るまで 2、3 を繰り返す

## 工夫点

- チャット形式でやると、どうせ毎回全てのチャット履歴を送るので、今回はチャット履歴をほぼ持たずに zero-shot あるいは few-shot で全てのステップを行う。データは変数に保存され、進行状態は常に更新されるので zero-shot でもタスクはすすむ
  - トークン数削減できるかも？
- 常に出力を評価してもらっている。ツールを使った後、そのツールの結果を LLM 自身に評価してもらい成功か失敗か判断する。失敗が発生したら反省してプランを見直してもらう

# TODO

- プランを固定にする？
  - プラン関係の問題は無くなるが、LLM のありがたみがかなり減るのでは
- プランをユーザー指定ができるようにする？
  - 自然言語で書けるぶん楽ではあるが、やはり LLM のありがたみが
